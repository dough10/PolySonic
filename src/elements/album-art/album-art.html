<link href="../../bower_components/polymer/polymer.html" rel="import">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<dom-module id="album-art">
  <style is="custom-style">
    #art {
      border-radius:2px;
      height:250px;
      width:250px;
      padding:0;
      margin:2px;
      display: inline-block;
      background-repeat: no-repeat;
      background-position: center;
      background-origin: content-box;
      background-size:250px;
    }
    .overlay {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      background:#ffffff;
      color:#333333;
      text-align:left;
      max-height:40px;
    }
    .text {
      padding:4px;
      padding-left:8px;
    }
    div {
      overflow:hidden;
    }
    #loading {
      background:rgba(255,255,255,0.6);
      overflow:hidden;
      position:absolute;
      top:0;
      bottom:0;
      left:0;
      right:0;
      display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */
      display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */
      display: -ms-flexbox;      /* TWEENER - IE 10 */
      display: -webkit-flex;     /* NEW - Chrome */
      display: flex;             /* NEW, Spec - Opera 12.1, Firefox 20+ */
      -webkit-justify-content: center;
      -webkit-align-items: center;
      justify-content: center;
      align-items: center;
      pointer-events:none;
      z-index:1;
    }
    .playWrapper {
      overflow:hidden;
      position:absolute;
      top:0;
      bottom:0;
      left:0;
      right:0;
      display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */
      display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */
      display: -ms-flexbox;      /* TWEENER - IE 10 */
      display: -webkit-flex;     /* NEW - Chrome */
      display: flex;             /* NEW, Spec - Opera 12.1, Firefox 20+ */
      -webkit-justify-content: center;
      -webkit-align-items: center;
      justify-content: center;
      align-items: center;
    }
    paper-spinner {
      --paper-spinner-layer-1-color: #333;
      --paper-spinner-layer-2-color: #333;
      --paper-spinner-layer-3-color: #333;
      --paper-spinner-layer-4-color: #333;
    }
    .huge{
      color:rgba(255,255,255,0.8);
    }
    .huge::shadow #icon {
      height:95px;
      width:95px;
    }
    #details {
      min-height:695px;
      min-width:471px;
    }
    #closeDialog {
      position:absolute;
      z-index:5;
      left:16px;
      top:16px;
      border-radius: 50%;
      opacity:0.5;
    }
    #closeDialog:hover {
      color:#db4437;
      opacity:1;
    }
    #detailsArt {
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:471px;
      padding:0;
      margin:0px;
      display: inline-block;
      background-repeat: no-repeat;
      background-position: center;
      background-origin: content-box;
      background-size:471px;
    }
    #detailsScroller {
      padding:0;
      margin:0;
      position:absolute;
      top:471px;
      left:0;
      right:0;
      bottom:0;
      overflow-y: auto;
      font-size: 10px;
    }
    .deets {
      background: rgba(255,255,255,1);
      position:absolute;
      left:0;
      right:0;
      bottom:0;
    }
    #fab {
      position: fixed;
      z-index: 15;
    }
    .alignLeft {
      text-align:left;
    }
    .trackDeets {
      font-size: 14px;
      padding: 12px;
      max-height: 7px;
      overflow: hidden;
    }
  </style>
  <template>
    <paper-fab icon="av:play-arrow" hidden id="fab"></paper-fab>
    <paper-material id="art" animated on-mouseover="mouseIn" on-mouseout="mouseOut" elevation="1">
      <div id="loading">
        <paper-spinner active></paper-spinner>
      </div>
      <div class="playWrapper">
        <paper-icon-button class="huge" on-tap="playAlbum" icon="av:play-arrow"></paper-icon-button>
      </div>
      <div class="overlay horizontal layout">
        <div class="text flex vertical layout">
          <div style="font-size: 13px; max-height:14px;">[[artist]]</div>
          <div style="font-size: 15px; max-height:16px;">[[albumTitle]]</div>
        </div>
        <div>
          <paper-icon-button icon="more-vert"
                             on-tap="openDetails"></paper-icon-button>
        </div>
      </div>
    </paper-material>
    <paper-dialog id="details" modal
                  entry-animation="scale-up-animation"
                  exit-animation="scale-down-animation"
                  on-neon-animation-finish="_dialogAnimationFinished">
      <div id="detailsArt">
        <paper-icon-button id="closeDialog"
                           icon="arrow-back" on-tap="closeDetails"></paper-icon-button>
        <div class="deets">
          <div class="vertical layout">
            <div style="text-align:left; font-size:14pt; margin:8px; margin-left:16px; margin-right: 30px; max-height:40px;">
              <span>[[artist]]</span> / <span>[[albumTitle]]</span>
            </div>
            <div style="text-align:left; margin-left:16px;">
              <paper-icon-button on-tap="add2Playlist" icon="av:playlist-add"></paper-icon-button>
              <paper-icon-button on-tap="addFavorite" hidden$="[[isFavorite]]" icon="favorite-border"></paper-icon-button>
              <paper-icon-button on-tap="removeFavorite" hidden$="[[!isFavorite]]" icon="favorite"></paper-icon-button>
              <paper-icon-button on-tap="albumDownload" id="downloadLink" icon="file-download"></paper-icon-button>
              <paper-icon-button on-tap="moreLike" icon="av:radio"></paper-icon-button>
            </div>
          </div>
        </div>
      </div>
      <div id="detailsScroller">
        <template is="dom-repeat" items="[[playlist]]" as="track">
          <div class="horizontal layout alignLeft">
            <div class="flex trackDeets">
              <template is="dom-if" if="{{track.disk}}">D.<span>{{track.disk}}</span>,</template>
              <template is="dom-if" if="{{track.track}}">T.<span>{{track.track}}</span>: </template>
              <span>[[track.title]]</span>
            </div>
            <div>
              <paper-icon-button icon="av:play-arrow" on-tap="playTrack"></paper-icon-button>
            </div>
            <div>
              <paper-icon-button on-tap="addSingle2Playlist" icon="av:playlist-add"></paper-icon-button>
            </div>
            <div>
              <paper-icon-button on-tap="trackDownload" icon="file-download"></paper-icon-button>
            </div>
          </div>
        </template>
      </div>
    </paper-dialog>
    <paper-dialog id="bookmarkOption"></paper-dialog>
  </template>
  <script src="album-art.js"></script>
</dom-module>
