<html><head><link href="../../bower_components/polymer/polymer.html" rel="import">
<link href="../../bower_components/paper-input/paper-input.html" rel="import">
<link href="../../bower_components/paper-button/paper-button.html" rel="import">
<link href="../../bower_components/core-ajax/core-ajax.html" rel="import">
<link href="../../bower_components/paper-spinner/paper-spinner.html" rel="import">
<link href="../../bower_components/paper-toast/paper-toast.html" rel="import">
<link href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html" rel="import">
<link href="../../bower_components/core-menu/core-menu.html" rel="import">
<link href="../../bower_components/core-collapse/core-collapse.html" rel="import">
<link href="../../bower_components/paper-dropdown/paper-dropdown.html" rel="import">
<link href="../../bower_components/core-label/core-label.html" rel="import">
<link href="../../bower_components/core-collapse/core-collapse.html" rel="import">
<link href="../../bower_components/paper-toggle-button/paper-toggle-button.html" rel="import">
<link href="../../bower_components/core-icon/core-icon.html" rel="import">
</head><body><polymer-element name="settings-menu" attributes="url user pass version bitRate querySize storageQuota queryMethod colorThiefEnabled">
  <template>
    <style>
      :host {
        text-align:center;
        margin:auto;
        font-family: 'RobotoDraft', sans-serif;
      }
      #load {
        position:absolute;
        top:0;
        bottom:0;
        right:0;
        left:0;
        background: rgba(255,255,255,0.7);
        display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */
        display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */
        display: -ms-flexbox;      /* TWEENER - IE 10 */
        display: -webkit-flex;     /* NEW - Chrome */
        display: flex;             /* NEW, Spec - Opera 12.1, Firefox 20+ */
        -webkit-justify-content: center;
        -webkit-align-items: center;
        align-items:center;
        justify-content:center;
      }
      #showPass {
        font-size:8pt;
        cursor:pointer;
        display:inline-block;
      }
      paper-input-decorator {
        max-width:250px;
        margin:auto;
      }
      .red {
        color:#fff;
        background:
      }
      .switchBox {
        margin:auto;
        max-width:250px;
      }
      .switchLabel {
        font-weight: bold;
        text-align: left;
        display:inline-block;
        cursor:pointer;
      }
      paper-toggle-button.redSwitch::shadow [checked] .toggle-ink {
        color: #db4437;
      }
  
      paper-toggle-button.redSwitch::shadow [checked] .toggle {
        background-color: #db4437;
      }
      .collapseWrapper {
        padding:8px;
      }
      .yellow {
        color:#F7D953;
      }
      .link {
        cursor:pointer;
        display:inline-block;
      }
    </style>
    <core-ajax id="ajax" auto="false" method="GET" url="{{post.url}}/rest/ping.view?u={{post.user}}&amp;p={{post.pass}}&amp;v=1.11.0&amp;c=PolySonic&amp;f=json" handleas="json" loading="{{isLoading}}" error="{{error}}" params="{{post}}" response="{{response}}">
    </core-ajax>
    <div id="validate">
      <core-label>
        <h4>Server Settings</h4>
        <paper-input-decorator id="input1" labelvisible="" floatinglabel="" error="URL Required" label="URL:Port">
          <input is="core-input" id="address" type="URL" value="{{post.url}}" required="">
        </paper-input-decorator>
        <br>
        <paper-input-decorator id="input2"labelvisible="" floatinglabel="" error="Username Required" label="Username">
          <input is="core-input" type="text" value="{{post.user}}" required="">
        </paper-input-decorator>
        <br>
        <paper-input-decorator id="input3" labelvisible="" floatinglabel="" label="Password">
          <input is="core-input" id="password" type="password" value="{{post.pass}}">
        </paper-input-decorator>
        <br>
        <div id="showPass" on-tap="{{hidePass}}">Show Password</div><br>
        <br>
        <core-label>
          Bitrate:
          <paper-dropdown-menu label="Select Bitrate">
            <paper-dropdown layered class="dropdown">
              <core-menu class="menu" selected="{{post.bitRate}}" valueattr="i" on-core-select="{{bitRateSelect}}">
                <template repeat="{{speeds}}">
                  <paper-item i="{{}}">{{}} kbps</paper-item>
                </template>
              </core-menu>
            </paper-dropdown>
          </paper-dropdown-menu>
        </core-label>
        <br>
        <core-label>
          Results to Query:
          <paper-dropdown-menu label="Select Query Size">
            <paper-dropdown layered class="dropdown">
              <core-menu class="menu" selected="{{post.querySize}}" valueattr="i" on-core-select="{{querySelect}}">
                <template repeat="{{sizes}}">
                  <paper-item i="{{}}">{{}}</paper-item>
                </template>
              </core-menu>
            </paper-dropdown>
          </paper-dropdown-menu>
        </core-label>
        
        <!-- dropdown for selecting ID3 or traditional results -->
        <!--<br>
        <core-label>
          Sort By:
          <paper-dropdown-menu label="Select Method">
            <paper-dropdown layered class="dropdown">
              <core-menu class="menu" selected="{{post.queryMethod}}" valueattr="i" on-core-select="{{methodSelect}}">
                <paper-item i="ID3">ID3</paper-item>
                <paper-item i="Traditional">Traditional</paper-item>
              </core-menu>
            </paper-dropdown>
          </paper-dropdown-menu>
        </core-label>-->
        
        <!-- switch to enable color thief mode -->
        <br>
        <div center horizontal layout class="switchBox">
          <div flex class="switchLabel" title="Click for Details" on-tap="{{thiefDetailsToggle}}">
            <core-icon class="yellow" icon="warning"></core-icon>
            Color Thief Mode
          </div>
          <paper-toggle-button class="redSwitch" checked="{{colorThiefEnabled}}" on-change="{{colorThiefToggle}}"></paper-toggle-button>
        </div>
        <core-collapse id="thiefCollapse">
          <div class="collapseWrapper">
            <h4>Test Feature</h4>
            Color Thief is a Javascript library that can extract a color palette from a image. I use it to get a highlight color for the action fab and progress bar when on player screen. IF you enable this option you must clear cache and researt app so app can download images again and calcualate a color palette from it. Check out the project on their <div class="link" link='https://github.com/lokesh/color-thief/' on-tap='{{linkGo}}'>Github</div> for more info.
            <br>
            <br>
            If you try this option please send feedback on any issues you encounter <div class="link" link="https://github.com/dough10/PolySonic/issues" on-tap='{{linkGo}}'>here</div>
          </div>
        </core-collapse>
        <br>
        <paper-button on-tap="{{submit}}">
          <template if="{{isLoading}}">
            <div id="load">
              <paper-spinner active="https://github.com/dough10/PolySonic/issues" on-tap='{{linkGo}}'></paper-spinner>
            </div>
          </template>
          Submit
        </paper-button>
      </core-label>
      <br>
      <br>
      <br>
      <br>
      <paper-button on-tap="{{showQuota}}">Cache Details</paper-button>
      <core-collapse id="quota">
        {{storageQuota}}
        <br>
        <br>
        <paper-button on-tap="{{clearCache}}">Clear Cache</paper-button>
      </core-collapse>
      <br>
      <br>
      <paper-button on-tap="{{clearSettings}}">Clear Settings</paper-button>
    </div>
  </template>
  <script src="settings-menu.js"></script>
</polymer-element></body></html>
