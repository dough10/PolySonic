<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>PolySonic</title>
  <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
  <script src="bower_components/x-notification/x-notification.js"></script>
  <link href="imports.html" rel="import">
  <link rel="stylesheet" href="styles/PolySonic.css" shim-shadowdom>
</head>
<body>
  <div id="loader">
    <div class="box">
      <img src="../images/icon_128.png" height="128" width="128" alt="Icon">
      <div tyle="height:30px">
        <paper-spinner id="spinner" active=""></paper-spinner>
      </div>
    </div>
  </div>
  <div unresolved>
    <template is="auto-binding" id="tmpl">
      <animated-fab style="-webkit-app-region: no-drag" page="{{page}}" on-tap="{{doAction}}"></animated-fab>
      <core-drawer-panel id="panel" narrow="{{narrow}}" responsivewidth="191900px" disableSwipe?="{{page !== 0}}">
        <!-- menu -->
        <core-scroll-header-panel drawer flex mode="seamed">
          <core-menu id="menu" selected="{{selected}}" valueattr="i">
            <core-toolbar class="medium-tall"></core-toolbar>
            <paper-item on-tap="{{getArtist}}">
              <core-icon icon="perm-identity"></core-icon>
              Artists List
            </paper-item>
            <template repeat="{{sortTypes}}">
              <paper-item on-tap="{{selectAction}}" i="{{sort}}">
                <core-icon icon="sort"></core-icon>
                {{name}}
              </paper-item>
            </template>
            <paper-item on-tap="{{getPodcast}}">
              <core-icon icon="sort"></core-icon>
              Podcast
            </paper-item>
            <paper-item on-tap="{{getStarred}}">
              <core-icon icon="favorite"></core-icon>
              Favorites
            </paper-item>
            <paper-item on-tap="{{openSearch}}">
              <core-icon icon="search"></core-icon>
              Search
            </paper-item>
            <paper-item on-tap="{{gotoSettings}}">
              <core-icon icon="settings"></core-icon>
              Settings
            </paper-item>
          </core-menu>
        </core-scroll-header-panel>
        <!-- body -->
        <core-header-panel id="headerPanel" main flex mode="seamed">
          <core-toolbar id="toolbar" class="medium-tall">
            <div flex></div>
            <paper-icon-button icon="remove" on-tap="{{minimize}}"></paper-icon-button>
            <!--<paper-icon-button class="max" on-tap="{{maximize}}"></paper-icon-button>-->
            <paper-icon-button icon="close" on-tap="{{close}}"></paper-icon-button>
            <template if="{{page === 0}}">
              <paper-icon-button icon="menu" on-tap="{{openPanel}}" class="bottom"></paper-icon-button>
              <div flex  class="bottom alignLeft">PolySonic</div>
              <paper-icon-button title="Change View" on-tap="{{toggleWall}}" icon="{{view}}" class="bottom"></paper-icon-button>
            </template>
            <template if="{{page !== 0}}">
              <paper-icon-button class="bottom" icon="arrow-back" on-tap="{{back2List}}"></paper-icon-button>
            </template>
            <template if="{{page === 1}}">
              <div class="bottom" flex>{{currentPlaying}}</div>
            </template>
            <template if="{{page === 3}}">
              <div flex class="bottom"></div>
            </template>
           <template if="{{page === 2}}">
              <div flex class="bottom"></div>
            </template>
           <template if="{{page === 4}}">
              <div flex class="bottom"></div>
            </template>
            <template if="{{page !== 1}}">
              <template if="{{isNowPlaying}}">
                <paper-icon-button title="Now Playing" on-tap="{{nowPlaying}}" icon="av:hearing" class="bottom"></paper-icon-button>
              </template>
            </template>
          </core-toolbar>
          <core-animated-pages id="main" on-core-animated-pages-transition-prepare="{{fixScroller}}" on-core-animated-pages-transition-end="{{fixScroller}}" selected="{{page}}" transitions="slide-from-right">
            <section>
              <album-wall id="wall" listMode="{{listMode}}" url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}" bitRate="{{bitRate}}" querySize="{{querySize}}" isLoading="{{isLoading}}"></album-wall>
            </section>
            <section>
              <div id="coverArt"></div>
              <div class="controlsWrapper">
                <paper-progress id="progress" value="{{progress}}" secondaryProgress="{{buffer}}" on-tap="{{progressClick}}"></paper-progress>
                <div id="time">{{playTime}}</div>
                <template if="{{playlist && playing !== 0}}">
                  <paper-icon-button icon="av:skip-previous" on-tap="{{lastTrack}}" class="big"></paper-icon-button>
                </template>
                <template if="{{playlist[0] && playing === 0}}">
                  <paper-icon-button class="big"></paper-icon-button>
                </template>
                <paper-icon-button id="avIcon" class="huge" icon="av:pause" on-tap="{{playPause}}"></paper-icon-button>
                <template if="{{playlist[0]}}">
                  <paper-icon-button icon="av:skip-next" on-tap="{{nextTrack}}" id="nextTrack" class="big"></paper-icon-button>
                </template>
                <paper-icon-button id="volume" icon="av:volume-up" on-tap="{{toggleVolume}}"></paper-icon-button>
              </div>
            </section>
            <section>
              <paper-shadow z='1' class='card'>
                <settings-menu url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}" bitRate="{{bitRate}}" querySize="{{querySize}}"></settings-menu>
              </paper-shadow>
            </section>
            <section>
              <album-details id="details" url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}" bitRate="{{bitRate}}"></album-details>
            </section>
            <section>
              <artist-details id="aDetails" listMode="{{listMode}}" url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}" bitRate="{{bitRate}}"></artist-details>
            </section>
          </core-animated-pages>
        </core-header-panel>
      </core-drawer-panel>
      <paper-dialog id="playlistDialog" transition="core-transition-top" heading="Playlist">
        <paper-item on-tap="{{clearPlaylist}}">
          <core-icon icon="close"></core-icon>
          Clear Playlist
        </paper-item>
        <core-menu class="menu" id="playlistMenu" selected="{{playing}}">
          <template repeat="{{playlist}}">
            <paper-item on-tap="{{playThis}}" ident="{{id}}" cover="{{cover}}" artist="{{artist}}" title="{{title}}" style="color:#000000" ident="{{id}}">
              <div flex style="overflow:hidden">
                {{artist}} - {{title}}
              </div>
              <div style="margin-left:8px">
                {{duration}}
              </div>
            </paper-item>
          </template>
        </core-menu>
      </paper-dialog>
      <paper-toast id="toast"></paper-toast>
      <paper-dialog id="volumeDialog" transition="core-transition-bottom">
        Volume
        <br>
        <volume-slider volume="{{volume}}"></volume-slider>
      </paper-dialog>
      <paper-action-dialog id="firstRun" autoclosedisabled transition="core-transition-center">
        <subsonic-login url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}">
        </subsonic-login>
      </paper-action-dialog>
      <paper-action-dialog id='analistics' autoclosedisabled transition="core-transition-center" layered>
        <h4>Allow anonymous usage tracking?</h4>
        <paper-button affirmative on-tap="{{disAllowAnalistics}}">Decline</paper-button>
        <paper-button affirmative on-tap="{{allowAnalistics}}">Accept</paper-button>
      </paper-action-dialog>
      <paper-dialog id="searchDialog" header="Search" transition="core-transition-center">
        <div flex style="text-align: center;">
          <paper-input value="{{searchQuery}}"></paper-input>
          <paper-button on-tap="{{doSearch}}" style="background:#cccccc; color:#ffffff;">
            <core-icon icon="search"></core-icon>
          </paper-button>
        </div>
        <div>
          <paper-icon-button icon="close"></paper-icon-button>
        </div>
        <div style="height:400px; width:400px; overflow-y:scroll; text-align: center;">
          <template if="{{searchResults.artist}}">
            <h3>Artists</h3>
            <template repeat="{{searchResults.artist}}">
              <core-item>{{name}}</core-item>
            </template>
          </template>
          <template if="{{searchResults.album}}">
            <h3>Albums</h3>
            <template repeat="{{searchResults.album}}">
              <album-art listMode="search" bitRate="{{bitRate}}" item="{{id}}" cover="{{coverArt}}" artist="{{artist}}" album="{{name}}" url="{{url}}" user="{{user}}" pass="{{pass}}" version="{{version}}" isFavorite="{{starred}}"></album-art>
            </template>
          </template>
          <template if="{{searchResults.song}}">
            <h3>Songs</h3>
            <template repeat="{{searchResults.song}}">
              <core-item>
                <div flex style="text-align:left; overflow:hidden;">
                  {{title}}
                </div>
                <paper-icon-button icon="av:play-arrow" dismissive="" on-tap="{{playTrack}}" title="{{title}}" artist="{{artist}}" ident="{{id}}" cover="{{cover}}"></paper-icon-button>
                <paper-icon-button on-tap="{{addSingle2Playlist}}" icon="av:playlist-add" title="{{title}}" artist="{{artist}}" ident="{{id}}" cover="{{cover}}"></paper-icon-button>
                <paper-icon-button on-tap="{{doDownload}}" ident="{{id}}"  icon="file-download"></paper-icon-button>
              </core-item>
            </template>
          </template>
        </div>
      </paper-dialog>
      <core-a11y-keys keys="space" on-keys-pressed="{{playPause}}"></core-a11y-keys>
      <core-a11y-keys keys="left" on-keys-pressed="{{lastTrack}}"></core-a11y-keys>
      <core-a11y-keys keys="right"on-keys-pressed="{{nextTrack}}"></core-a11y-keys>
      <core-a11y-keys keys="up" on-keys-pressed="{{volUp}}"></core-a11y-keys>
      <core-a11y-keys keys="down" on-keys-pressed="{{volDown}}"></core-a11y-keys>
      <x-notification id="playNotify" timeout='5000' tag="tag"></x-notification>
      <audio id="audio"></audio>
    </template>
  </div>
  <script src="js/cast_sender.js"></script>
  <script src="js/PolySonic.js"></script>
  <script src="js/google-analytics-bundle.js"></script>
</body>
