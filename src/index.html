<!DOCTYPE html>
<html>
  <head>

    <!-- meta data -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#4D4C4C">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- polyfill -->
    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <!-- build:css app.min.css -->
    <link rel="stylesheet" href="styles/pace.css">
    <!-- /build -->
    <!-- imports -->
    <link href="imports.html" rel="import">
  </head>
  <body>
    <!-- loading screen -->
    <div id="loader">
      <div class="w128">
        <img src="../images/icon_128.png" height="128" width="128" alt="Icon">
        <div>
          <paper-spinner id="spinner" active=""></paper-spinner>
        </div>
      </div>
    </div>
    <template is="dom-bind" id="app">
      <app-globals id="globals"></app-globals>
      <paper-drawer-panel id="appDrawer" narrow="{{narrow}}">
        <paper-header-panel drawer>
          <paper-toolbar class="medium-tall whiteHeader"></paper-toolbar>
          <paper-menu>
            <paper-item class="menu-item" on-tap="getArtists">
              <iron-icon icon="av:recent-actors" class="mRight16"></iron-icon>
              Artists
            </paper-item>
            <paper-item class="menu-item" on-tap="newestAlbums">
              <iron-icon icon="av:queue-music" class="mRight16"></iron-icon>
              Newest
            </paper-item>
            <paper-item class="menu-item" on-tap="byArtistAlbums">
              <iron-icon icon="av:queue-music" class="mRight16"></iron-icon>
              By Artist
            </paper-item>
            <paper-item class="menu-item" on-tap="byNameAlbums">
              <iron-icon icon="av:queue-music" class="mRight16"></iron-icon>
              By Name
            </paper-item>
            <paper-item class="menu-item" on-tap="frequestAlbums">
              <iron-icon icon="av:queue-music" class="mRight16"></iron-icon>
              Frequent
            </paper-item>
            <paper-item class="menu-item" on-tap="recentAlbums">
              <iron-icon icon="av:queue-music" class="mRight16"></iron-icon>
              Recent
            </paper-item>

            <paper-item class="menu-item" on-tap="settings">
              <iron-icon icon="settings" class="mRight16"></iron-icon>
              Settings
            </paper-item>
          </paper-menu>

        </paper-header-panel>
        <neon-animated-pages main on-iron-select="mainPageAnimationPrepare" on-neon-animation-finish="mainPageAnimationFinished" entry-animation="{{entryAnimation}}" exit-animation="{{exitAnimation}}" selected="{{page}}">
          <!-- album wall -->
          <neon-animated>
            <paper-header-panel id="mainPageHeader">
              <paper-toolbar>
                <paper-icon-button disabled$="{{dataLoading}}" hidden="{{!narrow}}" icon="menu" on-tap="openDrawer" class="mRight20"></paper-icon-button>
                <div class="title">PolySonic</div>
                <paper-icon-button class="js-album-mode" icon="view-stream" on-tap="changeAlbumMode"></paper-icon-button>
              </paper-toolbar>
              <div class="center">
                <!-- // page 0 = albums // page 1 = artists // page 2 = podcasts -->
                <neon-animated-pages on-neon-animation-finish="mainPageAnimationFinished" entry-animation="fade-in-animation" exit-animation="fade-out-animation" selected="{{subPage}}">
                  <neon-animated>
                    <template is="dom-repeat" items="{{albums}}" as="album">
                      <subsonic-album mode="{{albumMode}}" album="{{album}}"></subsonic-album>
                    </template>
                    <div style="padding:16px;">
                      <paper-spinner hidden$="{{!dataLoading}}" class="blackSpinner" active$="{{dataLoading}}"></paper-spinner>
                    </div>
                  </neon-animated>
                  <neon-animated>
                    <template is="dom-repeat" items="{{artists}}" as="artist">
                      <div class="js-album-hidden">{{artist.name}}</div>
                    </template>
                  </neon-animated>
                  <neon-animated></neon-animated>
                </neon-animated-pages>
              </div>
            </paper-header-panel>
          </neon-animated>

          <neon-animated></neon-animated>
          <!-- player -->
          <neon-animated>
            <music-player volume="{{volume}}"></music-player>
          </neon-animated>
          <!-- settings -->
          <neon-animated>
            <paper-header-panel>
              <paper-toolbar class="whiteHeader">
                <paper-icon-button hidden="{{!narrow}}" icon="close" on-tap="back" class="mRight20"></paper-icon-button>
                <div class="title">Settings</div>
              </paper-toolbar>
            </paper-header-panel>
          </neon-animated>
        </neon-animated-pages>
      </paper-drawer-panel>
    </template>

    <!-- <script src="js/google-analytics-bundle.js"></script> -->
    <!-- <script src="js/md5.js"></script>-->
    <script src="js/color-thief.min.js"></script>
    <!-- <script src="js/version_compare.js"></script>-->
    <script src="js/subsonic-api.min.js"></script>
    <script src="js/simpleStorage.js"></script>
    <!-- <script src="js/annyang.min.js"></script> -->

    <!-- build:js js/PolySonic.js -->
    <script src="js/PolySonic.es6"></script>
    <!-- /build -->
  </body>
</html>
